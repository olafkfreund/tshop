# TShop Development Environment Configuration
# This file is used by direnv to automatically load the development environment

# Use the flake development shell
use flake

# Load environment variables from .env.local if it exists
dotenv_if_exists .env.local

# Set up Node.js environment
export NODE_ENV=development
export NEXT_TELEMETRY_DISABLED=1
export TURBO=1

# Development server configuration
export PORT=3000
export HTTPS=true

# Database configuration
export PGDATA="$PWD/postgres-data"
export DATABASE_URL="postgresql://postgres:password@localhost:5432/tshop_dev"
export DATABASE_TEST_URL="postgresql://postgres:password@localhost:5432/tshop_test"

# Redis configuration
export REDIS_URL="redis://localhost:6379"

# SSL configuration for local development
export SSL_CRT="$PWD/certs/localhost.pem"
export SSL_KEY="$PWD/certs/localhost-key.pem"

# Performance optimization
export NODE_OPTIONS="--max-old-space-size=4096"

# Add node_modules/.bin to PATH
PATH_add node_modules/.bin

# Create necessary directories
mkdir -p logs certs postgres-data redis-data uploads public/uploads

echo "ðŸŽ¨ TShop development environment loaded!"
echo "ðŸ“‹ Run 'health-check' to verify your setup"